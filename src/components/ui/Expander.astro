---
/**
 * Expander.astro
 *
 * This component renders an expandable/collapsible content section using the HTML details/summary
 * elements. It's designed to display additional information that can be hidden or revealed by the user,
 * providing a clean way to manage content density and progressive disclosure.
 *
 * Features:
 * - Native HTML details/summary implementation for accessibility
 * - Expandable/collapsible content sections
 * - HTML content support in both title and description
 * - Themeable styling through CSS classes
 * - Accessible structure with semantic HTML elements
 * - Data attributes for test automation
 *
 * Props:
 * - title: Expandable section title text (can contain HTML)
 * - description: Expandable section description content (can contain HTML)
 *
 * Styling Inputs:
 * - getClasses('Component+Expander'): Retrieves CSS classes for expander elements
 *   from the theme's style configuration:
 *   - title: Classes for the summary element (expandable title)
 *   - description: Classes for the description content div element
 *
 * Component Integration:
 * - getClasses: Manages theme-based styling
 *
 * Data Flow:
 * 1. Receives title and description content through Astro.props
 * 2. Renders details element as expandable container
 * 3. Uses summary element as clickable title/header
 * 4. Applies theme-based styling through getClasses utility
 * 5. Uses set:html for safe HTML content rendering
 *
 * Layout Structure:
 * - details element as expandable container
 * - summary element as clickable title/header
 * - div element for description content
 *
 * Accessibility:
 * - Native HTML details/summary elements for built-in accessibility
 * - Proper semantic structure
 * - Keyboard navigation support
 * - Data attributes for test automation
 *
 * Usage Context:
 * - Expandable FAQ items in Stats widgets
 * - Progressive disclosure of detailed information
 * - Content sections that can be collapsed to save space
 * - Any content requiring show/hide functionality
 */

import { getClasses } from '~/utils/theme';

/**
 * Component Props Interface
 *
 * @property title - Expandable section title text (can contain HTML)
 * @property description - Expandable section description content (can contain HTML)
 */
interface Props {
  title: string;
  description: string;
}

// Destructure props
const { title, description } = Astro.props;

// Retrieve CSS classes for expander elements from theme configuration
const classes = getClasses('Component+Expander');
---

{
  /*
    Details element that serves as the expandable container.
    - Provides native expand/collapse functionality
    - Contains summary element as title and content div as description
  */
}
<details>
  {
    /*
      Summary element that serves as the clickable title/header.
      - Toggles the expanded/collapsed state when clicked
      - Styled with classes.title from theme configuration
      - Uses set:html for safe HTML rendering of title content
      - Includes data-name attribute for test automation
    */
  }
  <summary class={classes.title} set:html={title} data-name="expander-title" />
  {
    /*
      Description content div that contains the expandable content.
      - Only visible when details element is expanded
      - Styled with classes.description from theme configuration
      - Uses set:html for safe HTML rendering of description content
      - Includes data-name attribute for test automation
    */
  }
  <div class={classes.description} set:html={description} data-name="expander-description" />
</details>
