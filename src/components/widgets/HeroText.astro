---
/**
 * HeroText.astro
 *
 * This component renders a text-focused hero widget that serves as a prominent page entrance.
 * It displays a compelling headline, supporting content, and up to two call-to-action options
 * in a clean, text-centric layout. The hero section is designed to immediately capture user
 * attention and communicate the primary value proposition through text-focused content.
 *
 * Features:
 * - Prominent widget structure with optional title, subtitle, and tagline
 * - Support for rich text content and dual call-to-action options
 * - Clean, text-centric layout without image distractions
 * - Responsive layout that adapts to different screen sizes
 * - Themeable styling through CSS classes
 * - Accessible structure with proper labeling
 *
 * Props (extends TitledWidget interface):
 * - id (optional): HTML id attribute for the widget container
 * - title (optional): Main headline text (can be passed via slot or prop)
 * - subtitle (optional): Supporting text below title (can be passed via slot or prop)
 * - tagline (optional): Smaller text above title (can be passed via slot or prop)
 * - content (optional): Additional HTML content below subtitle
 * - callToAction: Either a string of HTML content or CallToAction object for primary action
 *   - When object: Configures a Button component with primary variant
 *   - When string: Rendered as raw HTML content
 * - callToAction2: Either a string of HTML content or CallToAction object for secondary action
 *   - When object: Configures a Button component
 *   - When string: Rendered as raw HTML content
 * - classes (optional): CSS class configuration object
 * - bg (optional): Background image URL string
 *
 * CallToAction Structure:
 * - variant: Button style variant ('primary', 'secondary', 'tertiary', 'link')
 * - text: Button display text
 * - icon: Optional icon identifier
 * - href: URL for link buttons
 * - type: Button type ('button', 'submit', 'reset')
 * - value: Button value attribute
 * - classes: Additional CSS classes for the button
 *
 * Styling Inputs:
 * - getClasses('Component+HeroText'): Retrieves CSS classes for hero text elements
 *   from the theme's style configuration:
 *   - wrapper: Classes for the WidgetWrapper container
 *   - container: Classes for the main hero content container
 *   - headline.container: Classes for the headline section container
 *   - headline.tagline: Classes for the tagline text element
 *   - headline.title: Classes for the main title heading
 *   - subtitle_container: Classes for the subtitle/actions container
 *   - headline.subtitle: Classes for the subtitle text element
 *   - actions_container: Classes for the actions wrapper div
 *   - action_item: Classes for individual action button wrappers
 *   - content_container: Classes for additional content container
 *
 * Component Integration:
 * - WidgetWrapper: Provides consistent widget structure
 * - Button: UI button component for action buttons
 * - getClasses: Manages theme-based styling
 *
 * Data Flow:
 * 1. Receives hero text configuration through Astro.props
 * 2. Renders headline content in hierarchical order (tagline, title, subtitle)
 * 3. Conditionally displays actions and additional content sections
 * 4. Wraps content in WidgetWrapper for consistent structure
 * 5. Applies theme-based styling through getClasses utility
 *
 * Layout Structure:
 * - WidgetWrapper provides outer container with background styling
 * - Main container holds headline section
 * - Headline section contains tagline, title, subtitle, actions, and content
 * - Actions container holds up to two call-to-action options
 *
 * Responsive Behavior:
 * - Flexible layout that adapts to screen size
 * - Content sections stack vertically on mobile
 *
 * Accessibility:
 * - Semantic HTML structure through WidgetWrapper
 * - Proper heading hierarchy (h1 for main title)
 * - Data attributes for test automation
 *
 * Usage Context:
 * - Text-focused page entrance point above the fold
 * - Communicate main value proposition through compelling copy
 * - Drive user engagement through prominent CTAs
 * - Integrated as the first section in content-heavy pages
 */

import type { TitledWidget, CallToAction } from '~/types';
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import Button from '~/components/ui/Button.astro';
import { getClasses } from '~/utils/theme';

/**
 * Component Props Interface extending TitledWidget
 *
 * @property content - Additional HTML content below subtitle
 * @property callToAction - Primary call-to-action (string or CallToAction object)
 * @property callToAction2 - Secondary call-to-action (string or CallToAction object)
 */
export interface Props extends TitledWidget {
  content?: string;
  callToAction?: string | CallToAction;
  callToAction2?: string | CallToAction;
}

// Destructure props with defaults and slot content rendering
const {
  id,

  // Render slot content for title, subtitle, and tagline if not provided as props
  title = await Astro.slots.render('title'),
  subtitle = await Astro.slots.render('subtitle'),
  tagline = await Astro.slots.render('tagline'),

  // Render slot content for content and call-to-action if not provided as props
  content = await Astro.slots.render('content'),
  callToAction = await Astro.slots.render('callToAction'),
  callToAction2 = await Astro.slots.render('callToAction2'),

  // Styling and background options with defaults
  classes: rawClasses = {},
  bg = '',
} = Astro.props;

// Retrieve CSS classes for hero text elements from theme configuration
const classes = getClasses('Component+HeroText', rawClasses);
---

{
  /*
    WidgetWrapper provides consistent structure for widget components.
    - Applies theme-based styling through classes.wrapper
    - Supports background styling through bg prop
    - Sets type to "hero-text" for semantic identification
  */
}
<WidgetWrapper type="hero-text" id={id} classes={classes.wrapper} bg={bg}>
  {
    /*
      Main container for hero text content with theme-based styling.
      - Contains headline section with all text content
      - Includes data-name attribute for test automation
    */
  }
  <div class={classes.container} data-name="hero-text-container">
    {
      /*
        Headline section container with theme-based styling.
        - Contains tagline, title, subtitle, actions, and additional content
        - Includes data-name attribute for test automation
      */
    }
    <div class={classes.headline.container} data-name="hero-text-headline-container">
      {
        /*
          Tagline element rendered when tagline content exists.
          - Uses set:html to render HTML content safely
          - Styled with classes.headline.tagline
          - Includes data-name attribute for test automation
        */
        tagline && <p class={classes.headline.tagline} set:html={tagline} data-name="hero-text-headline-tagline" />
      }

      {
        /*
          Main title heading rendered when title content exists.
          - Uses h1 for proper heading hierarchy
          - Uses set:html to render HTML content safely
          - Styled with classes.headline.title
          - Includes data-name attribute for test automation
        */
        title && <h1 class={classes.headline.title} set:html={title} data-name="hero-text-headline-title" />
      }

      {
        /*
          Subtitle container that holds subtitle text and action buttons.
          - Provides layout context for subtitle and actions
          - Includes data-name attribute for test automation
        */
      }
      <div class={classes.subtitle_container} data-name="hero-text-subtitle-container">
        {
          /*
            Subtitle element rendered when subtitle content exists.
            - Uses set:html to render HTML content safely
            - Styled with classes.headline.subtitle
            - Includes data-name attribute for test automation
          */
          subtitle && (
            <p class={classes.headline.subtitle} set:html={subtitle} data-name="hero-text-headline-subtitle" />
          )
        }

        {
          /*
            Actions container with theme-based styling.
            - Provides layout context for action buttons
            - Includes data-name attribute for test automation
          */
        }
        <div class={classes.actions_container} data-name="hero-text-actions-container">
          {
            /*
              Primary call-to-action rendered when callToAction exists.
              - Supports both Button component and HTML content
              - Includes data-name attribute for test automation
            */
            callToAction && (
              /*
                Individual action wrapper with theme-based styling.
                - Provides consistent spacing for buttons
                - Includes data-name attribute for test automation
              */
              <div class={classes.action_item} data-name="hero-text-action-item">
                {
                  /*
                    Conditional rendering based on callToAction data type.
                    - Object: Render Button component with primary variant
                    - String: Render raw HTML content
                  */
                  typeof callToAction === 'string' ? (
                    /*
                      Render raw HTML content when callToAction is a string.
                      - Uses Fragment with set:html for safe HTML rendering
                    */
                    <Fragment set:html={callToAction} />
                  ) : (
                    /*
                      Button component configured as primary variant.
                      - Uses spread operator to pass all callToAction props
                      - Applies primary variant by default
                    */
                    <Button variant="primary" {...callToAction} />
                  )
                }
              </div>
            )
          }

          {
            /*
              Secondary call-to-action rendered when callToAction2 exists.
              - Supports both Button component and HTML content
              - Includes data-name attribute for test automation
            */
            callToAction2 && (
              /*
                Individual action wrapper with theme-based styling.
                - Provides consistent spacing for buttons
                - Includes data-name attribute for test automation
              */
              <div class={classes.action_item} data-name="hero-text-action-item">
                {
                  /*
                    Conditional rendering based on callToAction2 data type.
                    - Object: Render Button component
                    - String: Render raw HTML content
                  */
                  typeof callToAction2 === 'string' ? (
                    /*
                      Render raw HTML content when callToAction2 is a string.
                      - Uses Fragment with set:html for safe HTML rendering
                    */
                    <Fragment set:html={callToAction2} />
                  ) : (
                    /*
                      Button component configured with callToAction2 properties.
                      - Uses spread operator to pass all callToAction2 props
                    */
                    <Button {...callToAction2} />
                  )
                }
              </div>
            )
          }
        </div>
      </div>

      {
        /*
          Additional content section rendered when content exists.
          - Uses Fragment with set:html for safe HTML rendering
          - Wrapped in content container with theme-based styling
          - Includes data-name attribute for test automation
        */
        content && (
          <div class={classes.content_container} data-name="hero-text-content-container">
            <Fragment set:html={content} />
          </div>
        )
      }
    </div>
  </div>
</WidgetWrapper>
