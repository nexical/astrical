---
/**
 * FAQs.astro
 *
 * This component renders a frequently asked questions widget that displays a collection
 * of question-and-answer items in a responsive grid layout. It's designed to provide
 * users with quick access to common questions and their answers in an organized format.
 *
 * Features:
 * - Titled widget structure with optional title, subtitle, and tagline
 * - Responsive grid layout for FAQ items
 * - Support for configurable number of columns
 * - Themeable styling through CSS classes
 * - Accessible structure with proper labeling
 *
 * Props (extends TitledWidget interface):
 * - id (optional): HTML id attribute for the widget container
 * - title (optional): Widget title (can be passed via slot or prop)
 * - subtitle (optional): Widget subtitle (can be passed via slot or prop)
 * - tagline (optional): Widget tagline (can be passed via slot or prop)
 * - items: Array of Item objects representing FAQ questions and answers
 *   - Item.title: Question text
 *   - Item.description: Answer text
 *   - Item.icon (optional): Icon identifier for the item
 * - columns: Number of columns for item grid layout (defaults to 2)
 * - classes (optional): CSS class configuration object
 * - bg (optional): Background image URL string
 *
 * Item Structure:
 * - title: FAQ question text
 * - description: FAQ answer text
 * - icon: Optional icon identifier (uses default if not provided)
 * - classes: Additional CSS classes for the item
 *
 * Styling Inputs:
 * - getClasses('Component+FAQs'): Retrieves CSS classes for FAQ elements
 *   from the theme's style configuration:
 *   - wrapper: Classes for the TitledWidgetWrapper container
 *   - headline: Classes for the TitledWidgetWrapper container
 *   - item_container: Classes for ItemGrid container (multi-column)
 *   - item_container_1: Classes for ItemGrid container (single column)
 *   - items: Object containing classes for ItemGrid items
 *   - default_icon: Default icon identifier for FAQ items
 *
 * Component Integration:
 * - TitledWidgetWrapper: Provides consistent titled widget structure
 * - ItemGrid: Component for rendering FAQ items in grid layout
 * - getClasses: Manages theme-based styling
 *
 * Data Flow:
 * 1. Receives FAQ configuration through Astro.props
 * 2. Renders FAQ items through ItemGrid component
 * 3. Wraps content in TitledWidgetWrapper for consistent structure
 * 4. Applies theme-based styling through getClasses utility
 *
 * Layout Structure:
 * - TitledWidgetWrapper provides outer container with title/subtitle
 * - ItemGrid renders FAQ items in configurable column layout
 * - Items display as question/answer pairs with optional icons
 *
 * Responsive Behavior:
 * - Grid layout adapts to screen size based on columns prop
 * - Single column layout on mobile when columns=1
 * - Multi-column layout on desktop based on columns setting
 *
 * Accessibility:
 * - Semantic HTML structure through TitledWidgetWrapper
 * - Proper heading hierarchy for questions
 * - Data attributes for test automation
 *
 * Usage Context:
 * - Answer common customer questions
 * - Provide product or service information
 * - Reduce support requests through self-service
 * - Integrated in page sections as an informational component
 */

import type { TitledWidget, Item } from '~/types';
import TitledWidgetWrapper from '~/components/ui/TitledWidgetWrapper.astro';
import ItemGrid from '~/components/ui/ItemGrid.astro';
import { getClasses } from '~/utils/theme';

/**
 * Component Props Interface extending TitledWidget
 *
 * @property items - Array of Item objects representing FAQ questions and answers
 * @property columns - Number of columns for item grid layout (defaults to 2)
 */
export interface Props extends TitledWidget {
  items?: Array<Item>;
  columns?: number;
}

// Destructure props with defaults and slot content rendering
const {
  id,

  // Render slot content for title, subtitle, and tagline if not provided as props
  title = await Astro.slots.render('title'),
  subtitle = await Astro.slots.render('subtitle'),
  tagline = await Astro.slots.render('tagline'),

  // FAQ items and layout configuration with defaults
  items = [],
  columns = 2,

  // Styling and background options with defaults
  classes: rawClasses = {},
  bg = '',
} = Astro.props;

// Retrieve CSS classes for FAQ elements from theme configuration
const classes = getClasses('Component+FAQs', rawClasses);
---

{
  /*
    TitledWidgetWrapper provides consistent structure for titled components.
    - Renders title, subtitle, and tagline content
    - Applies theme-based styling through classes.wrapper and classes.headline
    - Supports background styling through bg prop
    - Sets type to "faqs" for semantic identification
  */
}
<TitledWidgetWrapper type="faqs" id={id} classes={classes} bg={bg} title={title} subtitle={subtitle} tagline={tagline}>
  {
    /*
      ItemGrid component renders FAQ items in configurable grid layout.
      - Displays items in specified number of columns
      - Uses default icon from theme configuration
      - Applies theme-based styling to container and items
      - Conditionally uses different container classes based on column count
    */
  }
  <ItemGrid
    items={items}
    columns={columns}
    defaultIcon={classes.default_icon}
    classes={{
      container: `${columns === 1 ? classes.item_container_1 : classes.item_container}`,
      ...classes.items,
    }}
  />
</TitledWidgetWrapper>
